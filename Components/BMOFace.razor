@using BmoKids.Models

<div class="bmo-face-container">
    <svg class="bmo-face" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
        <!-- الخلفية -->
        <circle cx="100" cy="100" r="95" fill="#90EE90" stroke="#2d5016" stroke-width="3" />

        <!-- العيون -->
        <circle cx="70" cy="80" r="12" fill="#000" class="eye left-eye" />
        <circle cx="130" cy="80" r="12" fill="#000" class="eye right-eye" />

        <!-- الفم -->
        @if (MouthState == MouthState.Neutral || MouthState == MouthState.Closed)
        {
            <line x1="70" y1="130" x2="130" y2="130" stroke="#000" stroke-width="4" stroke-linecap="round" />
        }
        else if (MouthState == MouthState.Half)
        {
            <ellipse cx="100" cy="130" rx="20" ry="10" fill="none" stroke="#000" stroke-width="3" />
        }
        else if (MouthState == MouthState.Open || MouthState == MouthState.Wide)
        {
            <ellipse cx="100" cy="135" rx="25" ry="@(MouthState == MouthState.Wide ? 20 : 15)" fill="#000" />
        }
        else if (MouthState == MouthState.Sad)
        {
            <path d="M 70 140 Q 100 125 130 140" fill="none" stroke="#000" stroke-width="4" stroke-linecap="round" />
        }

        <!-- قلب عند النجاح -->
        @if (MouthState == MouthState.Wide)
        {
            <g class="success-heart">
                <path d="M 100 50 C 100 43, 105 38, 112 38 C 119 38, 124 43, 124 50 C 124 43, 129 38, 136 38 C 143 38, 148 43, 148 50 C 148 65, 124 80, 124 80 C 124 80, 100 65, 100 50 Z"
                      fill="#ff69b4" opacity="0.9" />
            </g>
        }
    </svg>
</div>

@code {
    [Parameter]
    public MouthState MouthState { get; set; } = MouthState.Neutral;
}

<style>
    .bmo-face-container {
        position: fixed;
        top: 20px;
        right: 20px;
        width: 120px;
        height: 120px;
        z-index: 1000;
        filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1));
    }

    .bmo-face {
        width: 100%;
        height: 100%;
        animation: float 3s ease-in-out infinite;
    }

    .eye {
        animation: blink 4s infinite;
    }

    .success-heart {
        animation: heartBeat 0.6s ease-in-out;
    }

    @@keyframes float {
        0%, 100% {
            transform: translateY(0px);
        }

        50% {
            transform: translateY(-10px);
        }
    }

    @@keyframes blink {
        0%, 90%, 100% {
            opacity: 1;
        }

        95% {
            opacity: 0;
        }
    }

    @@keyframes heartBeat {
        0% {
            transform: scale(0);
            opacity: 0;
        }

        50% {
            transform: scale(1.2);
            opacity: 1;
        }

        100% {
            transform: scale(1);
            opacity: 0.9;
        }
    }

    @@media (max-width: 768px) {
        .bmo-face-container {
            width: 80px;
            height: 80px;
            top: 10px;
            right: 10px;
        }
    }
</style>